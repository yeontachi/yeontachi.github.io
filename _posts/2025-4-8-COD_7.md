---
layout: single
title: "[컴퓨터 구조] 컴퓨터 산술 연산 Integer 곱셈, 나눗셈"
categories: ComputerArchitecture
tag: [ComputerArchitecture, CS]
toc: true
---

## 곱셈 (Multiplication)

### 정수 곱셈의 기본 원리
 컴퓨터에서의 곱셈은 우리가 수학 시간에 배운 **긴 곱셈(long multiplication)**과 매우 유사한 방식으로 시작된다.

```yaml
        1000    (8)  multiplicand
      x 1001    (9)  multiplier
     --------
        1000    <- 1 * 1000 (LSB = 1)
       0000     <- 0 * 1000
      0000      <- 0 * 1000
     1000       <- 1 * 1000
     -------- 
     1001000    <- 총합( 8 * 9 = 72 ) Product
```

 - 각각의 비트를 확인하며 0이면 생략, 1이면 multiplicand를 왼쪽으로 이동한 값을 더함(left shift)
 - 최종 결과의 길이 = multiplicand와 multiplier 비트 수의 합

### 곱셈 연산의 하드웨어 구조
 컴퓨터는 인간이 계산하듯 곱셈을 직관적으로 처리하지 않는다. 위에 방식 처럼, 단순한 덧셈과 시프트 연산만을 반복하여 곱셈을 구현한다. 이 방식은 하드웨어로 쉽게 자동화할 수 있으며, Shift-and-Add 곱셈기라는 구조로 널리 사용된다.

 ![Alt text](/assets/CAimages/Multiplication'.png)

 - **ALU(산술논리연산장치)** : 덧셈 연산 수행, Product + Multiplicand 연산 수행. 실제 곱셈은 하지 않으며, 덧셈만 반복한다.
 - **Multiplicand Register** : 피승수 저장 및 시프트 처리
 - **Multiplier Register** : 승수 저장 및 시프트 처리
 - **Product Register** : 연산 결과 누적 저장, 초기값은 0이며 조건에 따라 ALU 결과가 기록된다.
 - **Control Unit(제어 유닛)** : 연산 흐름 제어 및 Write 신호 결정. Multiplier의 LSB를 확인하고 ALU 연산 여부와 Write 신호를 결정. 시프트 타이밍도 제어한다.
    - **LSB = 1** : ALU 연산 수행 + Write 신호 활성화
    - **LSB = 0** : ALU 연산 수행 x Write 없으므로 Product 갱신이 안된다.

 위 구조는 **Shift-and-Add 곱셈기**로, 다음의 순서로 작동한다.

 1. **Multiplier의 LSB(최하위 비트)**를 검사
 2. **1**이면 Product에 Multiplicand를 더함
 3. **Multiplicand**는 **왼쪽으로 시프트**
 4. **Multiplier**는 **오른쪽으로 시프트**
 5. 위 과정을 비트 수만큼 반복  

- **단계별 예시 : 8 x 9**

 ```yaml
        1000    (8)  multiplicand
      x 1001    (9)  multiplier
     --------
        1000    <- 1 * 1000 (LSB = 1)
       0000     <- 0 * 1000
      0000      <- 0 * 1000
     1000       <- 1 * 1000
     -------- 
     1001000    <- 총합( 8 * 9 = 72 ) Product
```
 - Product = 0 초기화

 - **Step1**
    - Multiplier LSB = 1
    - ALU: 0 + 8 = 8
    - Product ← 8
    - Multiplicand <<= 1 → 16, Multiplier >>= 1 → 4
    - Write 수행

![Alt text](/assets/CAimages/step1.png)

![Alt text](/assets/CAimages/step2.png)

 - **Step2**
    - Multiplier LSB = 0
    - ALU: 연산 수행 x
    - Product ← 8
    - Multiplicand <<= 1 → 32, Multiplier >>= 1 → 2
    - Write 수행 x

![Alt text](/assets/CAimages/step3.png)

 - **Step3**
    - Multiplier LSB = 0
    - ALU: 연산 수행 x
    - Product ← 8
    - Multiplicand <<= 1 → 64, Multiplier >>= 1 → 1
    - Write 수행 x

![Alt text](/assets/CAimages/step4.png)

 - **Step4**
    - Multiplier LSB = 1
    - ALU: 연산 수행 8 + 64 = 72
    - Product ← 72
    - Multiplicand <<= 1 → 128, Multiplier >>= 1 → 0
    - Write 수행 

![Alt text](/assets/CAimages/step5.png)


![Alt text](/assets/CAimages/multiplicationHardware.png)


